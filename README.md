# BUAA-CO-2020
**北航计组实验课下测试代码2020**

**WARNING：课下代码仅保证能通过2020秋课上强测，不保证完全不存在问题**

## 课下测试设计要求

### P0

#### Q1.CRC校验

使用Logisim搭建一个除数为四位，原数据帧为8位的CRC校验码计算电路。

#### Q2.实现GRF

使用logisim搭建一个GRF。GRF中包含32个32位寄存器，分别对应0~31号寄存器，其中0号寄存器读取的结果恒为0。

#### Q3.Logisim导航

计小组要去机房上机考试，需要去B机房，但是目前他在A机房。他现在的时间很充裕，就决定生成一串随机序列，告诉他下一步行走的方向，直到走到B机房。他希望用logisim搭建一个可以导航的Moore型有限状态机，来通过序列告诉他是否到达B机房。

计小组只能往东南西北四个方向行走，且若能行走，则每次只能行走一格。若下一步不存在机房让计小组行走，那么计小组会撞到墙壁并且hit置高一周期，此时计小组仍保持原地不会移动，等待下一周期再进行运动。（如果下一步依旧撞墙， 则hit仍然置高；若下一步不会撞墙，则计小组将会继续行进，hit在此周期置0）

计小组走到B机房后，“到达”信号需要置位，并保持一周期。到达B机房后计小组将会在下一周期回到原点，（下一周期的输入将被忽略掉）等待下下周期的输入，继续测试他的序列。

计小组遵循上北下南左西右东的方向完成操作。

计小组在时钟上升沿的时候就已经知道自己下一步的方向并且瞬移过去，并且立即做出判断。

#### Q4.Logisim中的FSM

使用Logisim搭建一个Mealy型有限状态机 检测串行输入字符串中的能匹配正则表达式b{1,2}[ac]{2}的子串并输出。

#### 附加题.ftoi

使用Logisim进行组合逻辑设计，要求输入一个16位的单精度浮点数（符合IEEE-754标准），输出该浮点数的整数部分(包含符号)，用32位二进制符号数表示。

### P1

#### Q1.Verilog实现splitter

使用 Verilog 搭建一个32位 Splitter , 给定一个32位的二进制数作为输入，将其划分为四个8位的二进制数作为输出。

#### Q2.Verilog实现ALU

使用 Verilog 搭建一个 32 位六运算 ALU （加、减、与、或、逻辑右移、算术右移）。

#### Q3.Verilog实现EXT

EXT为扩展单元，其主要功能是完成将输入到其中的16位数据进行符号扩展、零扩展以及将输入的16位数加载到高位等操作。

#### Q4.格雷码计数器

实现如下功能：

1、 在任意一个时钟上升沿到来的时候，如果复位信号有效，则将计数器清零；

2、 每个时钟上升沿到来的时候，如果使能信号有效，计数器的值+1；

3、 在满足1时，即使2的条件满足，也不必执行2；

4、 计数器初值为0；

5、 当计数器的值在+1后出现溢出的情况时，将会回到零，同时从发生溢出的这个时钟上升沿开始，溢出标志位将会持续输出1，直到计数器被清零为止（其余情况下溢出标志位必须为0）。

#### Q5.表达式状态机

计算机经常用于处理关于表达式的问题。现在有这样一类表达式F的字符串需要你来验证它们的合法性：

1、表达式F中只含有数字0-9，加号+，乘号*。

2、表达式F可以按如下的规则产生：

a. 单个数字[0-9]是F；

b. 如果X是F，Y是F，X+Y也是F；

c. 如果X是F，Y是F，X*Y也是F。

每个时钟上升沿，状态机从 in 中读入一个ASCII编码的字符。假设读入的第i个字符为ci，则第n个时钟上升沿时，可以拼出一个字符串: s = c1c2……cn

我们需要你在此时判断 s 是否符合表达式F的定义。假如s符合F的定义，那么 out 应输出1，否则输出0。

另外，每个 clr 上升沿时，请清零状态；如果 clk 的上升沿时 clr 为 1，也需要清零状态。清零后，上面定义的字符串也应从空串开始计算。如果当前是空串，out也应输出0。

注意，我们不需要你分析表达式的语法和语义，只要判断形式上合法性就可以正确求解。

### P2

